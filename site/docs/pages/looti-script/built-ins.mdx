# Built-in Libraries

LootiScript comes with a standard library of utilities for common operations. These libraries are globally available.

## Math Library

The `Math` object provides mathematical functions and constants.

### Basic Operations
| Function | Description | Example |
|----------|-------------|---------|
| `Math.abs(x)` | Absolute value | `Math.abs(-5) // 5` |
| `Math.floor(x)` | Round down | `Math.floor(3.9) // 3` |
| `Math.ceil(x)` | Round up | `Math.ceil(3.1) // 4` |
| `Math.round(x)` | Round to nearest integer | `Math.round(3.5) // 4` |
| `Math.sqrt(x)` | Square root | `Math.sqrt(16) // 4` |
| `Math.pow(base, exp)` | Power | `Math.pow(2, 3) // 8` |
| `Math.min(a, b, ...)` | Minimum value | `Math.min(10, 5) // 5` |
| `Math.max(a, b, ...)` | Maximum value | `Math.max(10, 5) // 10` |
| `Math.clamp(x, min, max)` | Clamp value | `Math.clamp(15, 0, 10) // 10` |
| `Math.lerp(a, b, t)` | Linear interpolation | `Math.lerp(0, 100, 0.5) // 50` |

### Trigonometry
All trigonometric functions use **radians**.

- `Math.sin(x)`, `Math.cos(x)`, `Math.tan(x)`
- `Math.asin(x)`, `Math.acos(x)`, `Math.atan(x)`
- `Math.atan2(y, x)`

### Exponential and Logarithmic
- `Math.exp(x)`: Exponential function (e^x)
- `Math.log(x)`: Natural logarithm (base e)
- `Math.log10(x)`: Base-10 logarithm

### Random
- `Math.random()`: Random float between 0 and 1.
- `Math.randomInt(min, max)`: Random integer between min and max (inclusive).
- `Math.randomFloat(min, max)`: Random float between min and max.

### Game Development Utilities
| Function | Description | Example |
|----------|-------------|---------|
| `Math.distance(x1, y1, x2, y2)` | 2D distance between points | `Math.distance(0, 0, 3, 4) // 5` |
| `Math.distance3D(x1, y1, z1, x2, y2, z2)` | 3D distance between points | `Math.distance3D(0, 0, 0, 1, 1, 1)` |
| `Math.angleBetween(x1, y1, x2, y2)` | Angle between two points (radians) | `Math.angleBetween(0, 0, 1, 1)` |
| `Math.degToRad(degrees)` | Convert degrees to radians | `Math.degToRad(90) // ~1.57` |
| `Math.radToDeg(radians)` | Convert radians to degrees | `Math.radToDeg(3.14) // ~180` |
| `Math.sign(x)` | Sign of number (-1, 0, or 1) | `Math.sign(-5) // -1` |
| `Math.mod(n, m)` | Euclidean modulo (handles negatives) | `Math.mod(-5, 3) // 1` |

### Constants
- `Math.PI`: 3.14159...
- `Math.E`: 2.71828...

## String Library

The `String` object provides string manipulation functions.

### Modification
| Function | Description | Example |
|----------|-------------|---------|
| `String.trim(str)` | Remove whitespace from both ends | `String.trim("  hi  ") // "hi"` |
| `String.trimStart(str)` | Remove whitespace from start | `String.trimStart("  hi") // "hi"` |
| `String.trimEnd(str)` | Remove whitespace from end | `String.trimEnd("hi  ") // "hi"` |
| `String.toUpperCase(str)` | Convert to uppercase | `String.toUpperCase("hi") // "HI"` |
| `String.toLowerCase(str)` | Convert to lowercase | `String.toLowerCase("HI") // "hi"` |
| `String.replace(str, search, replace)` | Replace first occurrence | `String.replace("hello", "l", "x")` |
| `String.replaceAll(str, search, replace)` | Replace all occurrences | `String.replaceAll("hello", "l", "x")` |
| `String.split(str, separator)` | Split into list | `String.split("a,b", ",") // {"a", "b"}` |
| `String.repeat(str, count)` | Repeat string | `String.repeat("hi", 3) // "hihihi"` |
| `String.padStart(str, length, pad?)` | Pad start with character | `String.padStart("5", 3, "0") // "005"` |
| `String.padEnd(str, length, pad?)` | Pad end with character | `String.padEnd("5", 3, "0") // "500"` |
| `String.format(template, ...args)` | Format with placeholders | `String.format("Hello {0}", "World") // "Hello World"` |

### Inspection
| Function | Description | Example |
|----------|-------------|---------|
| `String.length(str)` | Get length | `String.length("hi") // 2` |
| `String.contains(str, search)` | Check if contains | `String.contains("team", "ea") // 1` |
| `String.startsWith(str, prefix)` | Check prefix | `String.startsWith("hi", "h") // 1` |
| `String.endsWith(str, suffix)` | Check suffix | `String.endsWith("hi", "i") // 1` |
| `String.indexOf(str, search, fromIndex?)` | Find first occurrence index | `String.indexOf("hello", "e") // 1` |
| `String.lastIndexOf(str, search, fromIndex?)` | Find last occurrence index | `String.lastIndexOf("hello", "l") // 3` |
| `String.substring(str, start, end?)` | Get substring | `String.substring("hello", 1, 3) // "el"` |
| `String.slice(str, start, end?)` | Extract substring (slice) | `String.slice("hello", 1, 3) // "el"` |

### Character Operations
| Function | Description | Example |
|----------|-------------|---------|
| `String.charAt(str, index)` | Get character at index | `String.charAt("hello", 1) // "e"` |
| `String.charCodeAt(str, index)` | Get character code | `String.charCodeAt("A", 0) // 65` |
| `String.fromCharCode(...codes)` | Create string from codes | `String.fromCharCode(65, 66) // "AB"` |

### Parsing
| Function | Description | Example |
|----------|-------------|---------|
| `String.parseInt(str, radix?)` | Parse integer | `String.parseInt("123") // 123` |
| `String.parseFloat(str)` | Parse float | `String.parseFloat("3.14") // 3.14` |

## List Library

The `List` object provides functions for working with arrays (lists).

### Modification
| Function | Description | Example |
|----------|-------------|---------|
| `List.push(list, item)` | Add to end | `List.push(items, 10)` |
| `List.pop(list)` | Remove from end | `List.pop(items)` |
| `List.unshift(list, item)` | Add to start | `List.unshift(items, 10)` |
| `List.shift(list)` | Remove from start | `List.shift(items)` |
| `List.reverse(list)` | Reverse list | `List.reverse(items)` |
| `List.sort(list, compareFn)` | Sort list | `List.sort(items)` |
| `List.shuffle(list)` | Shuffle list | `List.shuffle(items)` |

### Access & Search
| Function | Description | Example |
|----------|-------------|---------|
| `List.length(list)` | Get length | `List.length(items)` |
| `List.first(list)` | Get first item | `List.first(items)` |
| `List.last(list)` | Get last item | `List.last(items)` |
| `List.contains(list, item)` | Check if exists | `List.contains(items, 10)` |
| `List.indexOf(list, item)` | Find index | `List.indexOf(items, 10)` |

### Functional Helpers
| Function | Description | Example |
|----------|-------------|---------|
| `List.map(list, fn)` | Create new list by applying function | `List.map([1,2,3], x => x*2) // [2,4,6]` |
| `List.filter(list, fn)` | Create new list with elements that pass test | `List.filter([1,2,3], x => x>1) // [2,3]` |
| `List.reduce(list, fn, initial)` | Reduce list to single value | `List.reduce([1,2,3], (a,b) => a+b, 0) // 6` |
| `List.find(list, fn)` | Find first element matching condition | `List.find([1,2,3], x => x>1) // 2` |
| `List.findIndex(list, fn)` | Find index of first match | `List.findIndex([1,2,3], x => x>1) // 1` |
| `List.some(list, fn)` | Check if any element matches | `List.some([1,2,3], x => x>2) // 1` |
| `List.every(list, fn)` | Check if all elements match | `List.every([1,2,3], x => x>0) // 1` |

```lua
local numbers = {1, 2, 3, 4}
local doubled = List.map(numbers, x => x * 2)
// doubled is {2, 4, 6, 8}
```

### Array Manipulation
| Function | Description | Example |
|----------|-------------|---------|
| `List.slice(list, start, end?)` | Extract subarray | `List.slice([1,2,3,4], 1, 3) // [2,3]` |
| `List.concat(...arrays)` | Concatenate arrays | `List.concat([1,2], [3,4]) // [1,2,3,4]` |
| `List.flat(list, depth?)` | Flatten nested arrays | `List.flat([[1,2], [3,4]]) // [1,2,3,4]` |
| `List.flatMap(list, fn)` | Map and flatten | `List.flatMap([[1,2], [3,4]], x => x) // [1,2,3,4]` |
| `List.splice(list, start, deleteCount?, ...items)` | Insert/remove elements | `List.splice([1,2,3], 1, 1, 9) // [1,9,3]` |
| `List.fill(list, value, start?, end?)` | Fill array with value | `List.fill([1,2,3], 0) // [0,0,0]` |

### Search Operations
| Function | Description | Example |
|----------|-------------|---------|
| `List.lastIndexOf(list, item, fromIndex?)` | Find last index | `List.lastIndexOf([1,2,2,3], 2) // 2` |
| `List.includes(list, item, fromIndex?)` | Check if includes | `List.includes([1,2,3], 2) // 1` |
| `List.at(list, index)` | Get element at index (supports negative) | `List.at([1,2,3], -1) // 3` |

### Utility Functions
| Function | Description | Example |
|----------|-------------|---------|
| `List.unique(list)` | Remove duplicates | `List.unique([1,2,2,3]) // [1,2,3]` |
| `List.chunk(list, size)` | Split into chunks | `List.chunk([1,2,3,4], 2) // [[1,2], [3,4]]` |
| `List.sum(list)` | Sum of numbers | `List.sum([1,2,3]) // 6` |
| `List.average(list)` | Average of numbers | `List.average([1,2,3]) // 2` |
| `List.min(list)` | Minimum value | `List.min([1,2,3]) // 1` |
| `List.max(list)` | Maximum value | `List.max([1,2,3]) // 3` |

## JSON Library

The `JSON` object handles JSON data.

- `JSON.encode(value)`: Convert value to JSON string.
- `JSON.decode(string)`: Parse JSON string to value.
- `JSON.pretty(value)`: Convert to formatted JSON string.

```lua
local data = object x=10, y=20 end
local jsonStr = JSON.encode(data)
local parsed = JSON.decode(jsonStr)
```
