# Coding Style Guide

Writing clean, consistent code is crucial for long-term project maintenance and collaboration. This guide outlines the recommended coding style for LootiScript projects.

## Naming Conventions

### Variables & Functions
Use `camelCase` for variable and function names.

```lua
// ✅ Good
local playerName = "Hero"
local enemyHealth = 100

function calculateDamage(baseDamage)
  return baseDamage * 2
end

// ❌ Bad
local PlayerName = "Hero"  // PascalCase (reserved for classes)
local player_name = "Hero" // snake_case
```

### Classes
Use `PascalCase` for class names.

```lua
// ✅ Good
class EnemyController
  // ...
end

// ❌ Bad
class enemyController
class enemy_controller
```

### Constants
Use `UPPER_SNAKE_CASE` for constants (variables that should not change).

```lua
// ✅ Good
local MAX_PLAYERS = 4
local DEFAULT_SPEED = 200

// ❌ Bad
local maxPlayers = 4
```

### Private Members
Prefix private properties or methods (internal use only) with an underscore `_`.

```lua
class Player
  _internalState = 0

  _updateState = function()
    // ...
  end
end
```

## Formatting

### Indentation
Use **2 spaces** for indentation. This is the standard for LootiScript and Lua-based languages.

```lua
if isActive then
  doSomething()
  if isReady then
    start()
  end
end
```

### Spacing
-   Put spaces around operators (`=`, `+`, `-`, etc.).
-   Put a space after commas in lists and arguments.
-   Put a space before opening braces/keywords like `do` or `then`.

```lua
// ✅ Good
local total = price + tax
function add(a, b)
  return a + b
end

// ❌ Bad
local total=price+tax
function add(a,b)
  return a+b
end
```

## Comments

### Single Line
Use `//` for single-line comments. Place them on their own line or at the end of a line with a space.

```lua
// Initialize player
local player = new Player()

player.health = 100 // Set full health
```

### Multi-line
Use `/* ... */` for longer comments or block descriptions.

```lua
/*
  This function handles the main game loop logic.
  It updates all entities and checks for collisions.
*/
function update(dt)
  // ...
end
```

## Best Practices

### 1. Explicit Locals
Always use `local` for variables unless you intentionally want them to be global.

```lua
// ✅ Good
function update()
  local speed = 10
  player.x += speed
end

// ❌ Bad (pollutes global scope)
function update()
  speed = 10
  player.x += speed
end
```

### 2. Guard Clauses
Use guard clauses to reduce nesting.

```lua
// ✅ Good
function takeDamage(amount)
  if amount <= 0 then return end
  
  health -= amount
  if health <= 0 then
    die()
  end
end

// ❌ Bad (nested)
function takeDamage(amount)
  if amount > 0 then
    health -= amount
    if health <= 0 then
      die()
    end
  end
end
```

### 3. Object Literals
Format object literals clearly, especially if they have multiple properties.

```lua
// ✅ Good
local config = object
  width = 800,
  height = 600,
  fullscreen = 0
end

// ❌ Hard to read
local config = object width = 800, height = 600, fullscreen = 0 end
```

## File Structure

Organize your code logically. For larger files, use comments to separate sections.

```lua
// ==========================================
// Constants
// ==========================================
local MAX_SPEED = 300

// ==========================================
// State
// ==========================================
local player = null

// ==========================================
// Lifecycle Functions
// ==========================================
function init()
  // ...
end

function update(dt)
  // ...
end
```
